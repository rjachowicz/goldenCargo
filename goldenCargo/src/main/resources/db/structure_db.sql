create database "goldenCargo"
    with owner postgres;

create table public.vehicle_services
(
    cost             double precision,
    is_deleted       boolean      not null,
    created_at       timestamp(6) not null,
    next_service_due timestamp(6),
    service_date     timestamp(6),
    service_id       bigint generated by default as identity
        primary key,
    updated_at       timestamp(6) not null,
    vehicle_id       bigint       not null,
    service_type     varchar(50),
    service_center   varchar(100),
    description      varchar(255)
);

alter table public.vehicle_services
    owner to postgres;

create table public.clients
(
    is_deleted     boolean      not null,
    client_id      bigint generated by default as identity
        primary key,
    created_at     timestamp(6) not null,
    updated_at     timestamp(6) not null,
    nip            varchar(20)  not null,
    phone          varchar(20),
    contact_person varchar(100),
    email          varchar(100) not null,
    name           varchar(100) not null,
    address        varchar(255) not null
);

alter table public.clients
    owner to postgres;

create table public.client_orders
(
    is_deleted      boolean      not null,
    total_amount    double precision,
    client_id       bigint
        constraint fksvtx3xcntbrypx5rib5qq0ed6
            references public.clients,
    client_order_id bigint generated by default as identity
        primary key,
    created_at      timestamp(6) not null,
    order_date      timestamp(6),
    updated_at      timestamp(6) not null,
    payment_status  varchar(255) not null
        constraint client_orders_payment_status_check
            check ((payment_status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PAID'::character varying, 'UNPAID'::character varying, 'PARTIAL'::character varying])::text[])),
    status          varchar(255) not null
        constraint client_orders_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PENDING'::character varying, 'CONFIRMED'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying, 'CLOSED'::character varying])::text[]))
);

alter table public.client_orders
    owner to postgres;

create table public.client_invoices
(
    is_deleted      boolean          not null,
    total_amount    double precision not null,
    client_id       bigint           not null
        constraint fkfaki7doww8rveci8277p6o72d
            references public.clients,
    client_order_id bigint           not null
        constraint fk586j36w7ydi23hn3o2fugjjsu
            references public.client_orders,
    created_at      timestamp(6)     not null,
    date_issued     timestamp(6)     not null,
    due_date        timestamp(6)     not null,
    invoice_id      bigint generated by default as identity
        primary key,
    updated_at      timestamp(6)     not null,
    invoice_number  varchar(50)      not null
        unique,
    payment_status  varchar(255)     not null
        constraint client_invoices_payment_status_check
            check ((payment_status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PAID'::character varying, 'UNPAID'::character varying, 'PARTIAL'::character varying])::text[]))
);

alter table public.client_invoices
    owner to postgres;

create table public.goods
(
    is_deleted                    boolean          not null,
    weight                        double precision not null,
    client_order_id               bigint           not null
        constraint fk15cvsrmrdaff31tl6vhnn00tx
            references public.client_orders,
    created_at                    timestamp(6)     not null,
    goods_id                      bigint generated by default as identity
        primary key,
    updated_at                    timestamp(6)     not null,
    dimensions                    varchar(100),
    name                          varchar(100)     not null,
    description                   varchar(255),
    special_handling_instructions varchar(255)     not null
);

alter table public.goods
    owner to postgres;

create table public.invoices
(
    is_deleted     boolean          not null,
    total_amount   double precision not null,
    created_at     timestamp(6)     not null,
    date_issued    timestamp(6)     not null,
    due_date       timestamp(6)     not null,
    invoice_id     bigint generated by default as identity
        primary key,
    related_id     bigint,
    updated_at     timestamp(6)     not null,
    invoice_number varchar(50)      not null
        unique,
    invoice_type   varchar(255)     not null
        constraint invoices_invoice_type_check
            check ((invoice_type)::text = ANY
                   ((ARRAY ['CLIENT'::character varying, 'SUBCONTRACTOR'::character varying, 'SUPPLIER'::character varying, 'OTHER'::character varying])::text[])),
    payment_status varchar(255)     not null
        constraint invoices_payment_status_check
            check ((payment_status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PAID'::character varying, 'UNPAID'::character varying, 'PARTIAL'::character varying])::text[]))
);

alter table public.invoices
    owner to postgres;

create table public.locations
(
    is_deleted  boolean      not null,
    latitude    double precision,
    longitude   double precision,
    created_at  timestamp(6) not null,
    location_id bigint generated by default as identity
        primary key,
    updated_at  timestamp(6) not null,
    postal_code varchar(20),
    city        varchar(50),
    country     varchar(50),
    state       varchar(50),
    name        varchar(100),
    address     varchar(255)
);

alter table public.locations
    owner to postgres;

create table public.roles
(
    is_deleted  boolean      not null,
    created_at  timestamp(6) not null,
    role_id     bigint generated by default as identity
        primary key,
    updated_at  timestamp(6) not null,
    name        varchar(50)  not null
        unique,
    description varchar(255)
);

alter table public.roles
    owner to postgres;

create table public.routes
(
    distance          double precision,
    estimated_time    double precision,
    is_deleted        boolean      not null,
    created_at        timestamp(6) not null,
    end_location_id   bigint       not null
        constraint fktqxldvq6vfex3mna2wxpuw9an
            references public.locations,
    route_id          bigint generated by default as identity
        primary key,
    start_location_id bigint       not null
        constraint fkja5uqif3mnj3ff3idvepoifar
            references public.locations,
    updated_at        timestamp(6) not null,
    preferred_route   varchar(255)
);

alter table public.routes
    owner to postgres;

create table public.users
(
    is_deleted   boolean      not null,
    created_at   timestamp(6) not null,
    updated_at   timestamp(6) not null,
    user_id      bigint generated by default as identity
        primary key,
    phone_number varchar(20),
    first_name   varchar(50),
    last_name    varchar(50),
    username     varchar(50)  not null
        unique,
    email        varchar(100) not null
        unique,
    address      varchar(255),
    password     varchar(255) not null,
    status       varchar(255) not null
        constraint users_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'ACTIVE'::character varying, 'INACTIVE'::character varying, 'BANED'::character varying])::text[]))
);

alter table public.users
    owner to postgres;

create table public.drivers
(
    is_deleted                 boolean      not null,
    created_at                 timestamp(6) not null,
    date_of_birth              timestamp(6),
    driver_id                  bigint generated by default as identity
        primary key,
    hire_date                  timestamp(6) not null,
    medical_certificate_expiry timestamp(6) not null,
    updated_at                 timestamp(6) not null,
    user_id                    bigint       not null
        unique
        constraint fkfscpnjt46gco44xh86l99rxh7
            references public.users,
    license_category           varchar(10),
    license_number             varchar(50)  not null
        unique,
    driver_status              varchar(255) not null
        constraint drivers_driver_status_check
            check ((driver_status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'ACTIVE'::character varying, 'INACTIVE'::character varying])::text[]))
);

alter table public.drivers
    owner to postgres;

create table public.driver_reports
(
    is_deleted       boolean      not null,
    created_at       timestamp(6) not null,
    date             timestamp(6) not null,
    driver_id        bigint       not null
        constraint fk8h9orxv55m1wvo5si3o8976h8
            references public.drivers,
    driver_report_id bigint generated by default as identity
        primary key,
    updated_at       timestamp(6) not null,
    content          varchar(255)
);

alter table public.driver_reports
    owner to postgres;

create table public.logisticians
(
    is_deleted   boolean      not null,
    created_at   timestamp(6) not null,
    logistics_id bigint generated by default as identity
        primary key,
    updated_at   timestamp(6) not null,
    user_id      bigint       not null
        unique
        constraint fk18ep9u36sfxsotw3uyh6knpmd
            references public.users,
    department   varchar(50)
);

alter table public.logisticians
    owner to postgres;

create table public.messages
(
    is_deleted  boolean      not null,
    read_status boolean      not null,
    created_at  timestamp(6) not null,
    date_sent   timestamp(6) not null,
    message_id  bigint generated by default as identity
        primary key,
    receiver_id bigint       not null
        constraint fkt05r0b6n0iis8u7dfna4xdh73
            references public.users,
    sender_id   bigint       not null
        constraint fk4ui4nnwntodh6wjvck53dbk9m
            references public.users,
    updated_at  timestamp(6) not null,
    content     varchar(255) not null,
    subject     varchar(255) not null
);

alter table public.messages
    owner to postgres;

create table public.news
(
    is_deleted  boolean      not null,
    created_at  timestamp(6) not null,
    date_posted timestamp(6) not null,
    news_id     bigint generated by default as identity
        primary key,
    posted_by   bigint       not null
        constraint fkakrgw7fj4kjo8k64r92w4oed
            references public.users,
    updated_at  timestamp(6) not null,
    content     varchar(255) not null,
    title       varchar(255) not null
);

alter table public.news
    owner to postgres;

create table public.notifications
(
    is_deleted      boolean      not null,
    read_status     boolean      not null,
    created_at      timestamp(6) not null,
    date_sent       timestamp(6) not null,
    notification_id bigint generated by default as identity
        primary key,
    updated_at      timestamp(6) not null,
    user_id         bigint       not null
        constraint fk9y21adhxn0ayjhfocscqox7bh
            references public.users,
    message         varchar(255)
);

alter table public.notifications
    owner to postgres;

create table public.reports
(
    is_deleted     boolean      not null,
    created_at     timestamp(6) not null,
    date_generated timestamp(6) not null,
    generated_by   bigint       not null
        constraint fk6oup43skcuxmgopql1obft8lo
            references public.users,
    report_id      bigint generated by default as identity
        primary key,
    updated_at     timestamp(6) not null,
    report_type    varchar(50),
    content        varchar(255)
);

alter table public.reports
    owner to postgres;

create table public.user_roles
(
    assigned_at timestamp(6) not null,
    role_id     bigint       not null
        constraint fkh8ciramu9cc9q3qcqiv4ue8a6
            references public.roles,
    user_id     bigint       not null
        constraint fkhfh9dx7w3ubf1co1vdev94g3f
            references public.users,
    primary key (role_id, user_id)
);

alter table public.user_roles
    owner to postgres;

create table public.vehicle_types
(
    is_deleted       boolean      not null,
    maximum_load     double precision,
    created_at       timestamp(6) not null,
    updated_at       timestamp(6) not null,
    vehicle_type_id  bigint generated by default as identity
        primary key,
    name             varchar(50)  not null
        unique,
    dimensions       varchar(100),
    description      varchar(255),
    special_features varchar(255)
);

alter table public.vehicle_types
    owner to postgres;

create table public.vehicles
(
    capacity            double precision,
    is_deleted          boolean      not null,
    mileage             integer,
    year                integer,
    created_at          timestamp(6) not null,
    last_service_date   timestamp(6),
    next_service_due    timestamp(6),
    purchase_date       timestamp(6),
    updated_at          timestamp(6) not null,
    vehicle_id          bigint generated by default as identity
        primary key,
    vehicle_type_id     bigint       not null
        constraint fkk3cs3vldlan30kg1x6b57i4fe
            references public.vehicle_types,
    registration_number varchar(20)  not null
        unique,
    make                varchar(50),
    model               varchar(50),
    status              varchar(255) not null
        constraint vehicles_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'AVAILABLE'::character varying, 'IN_SERVICE'::character varying, 'ASSIGNED'::character varying, 'MAINTENANCE'::character varying])::text[]))
);

alter table public.vehicles
    owner to postgres;

create table public.driver_vehicles
(
    is_deleted    boolean      not null,
    assigned_date timestamp(6) not null,
    created_at    timestamp(6) not null,
    driver_id     bigint       not null
        constraint fk8rps614yp73srgxojmrybnfwm
            references public.drivers,
    end_date      timestamp(6) not null,
    id            bigint generated by default as identity
        primary key,
    updated_at    timestamp(6) not null,
    vehicle_id    bigint       not null
        constraint fk2yua66st8rjcncc4ui8dc9fhd
            references public.vehicles,
    notes         varchar(255),
    status        varchar(255) not null
        constraint driver_vehicles_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'IN_REPAIR'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying])::text[]))
);

alter table public.driver_vehicles
    owner to postgres;

create table public.incidents
(
    is_deleted    boolean      not null,
    created_at    timestamp(6) not null,
    date          timestamp(6) not null,
    driver_id     bigint       not null
        constraint fkr7yjttywvopo5vhaqqnx9pdl6
            references public.drivers,
    incident_id   bigint generated by default as identity
        primary key,
    reported_by   bigint       not null
        constraint fklsdthe1tepxj95377b6saenkh
            references public.users,
    updated_at    timestamp(6) not null,
    vehicle_id    bigint       not null
        constraint fkgwu3v09iuhjes7jexumiocuhw
            references public.vehicles,
    incident_type varchar(50),
    description   varchar(255),
    status        varchar(255) not null
        constraint incidents_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PENDING'::character varying, 'CONFIRMED'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying, 'CLOSED'::character varying])::text[]))
);

alter table public.incidents
    owner to postgres;

create table public.breakdowns
(
    is_deleted   boolean          not null,
    repair_cost  double precision not null,
    breakdown_id bigint generated by default as identity
        primary key,
    created_at   timestamp(6)     not null,
    incident_id  bigint           not null
        unique
        constraint fkd1f3eavr4r585jjakotakhw0e
            references public.incidents,
    repair_date  timestamp(6)     not null,
    updated_at   timestamp(6)     not null,
    description  varchar(255)
);

alter table public.breakdowns
    owner to postgres;

create table public.damages
(
    insurance_claim boolean,
    is_deleted      boolean      not null,
    repair_cost     double precision,
    created_at      timestamp(6) not null,
    damage_id       bigint generated by default as identity
        primary key,
    incident_id     bigint       not null
        unique
        constraint fklk8sh5cyg40l0ssv5tgshin0i
            references public.incidents,
    updated_at      timestamp(6) not null,
    claim_number    varchar(50),
    description     varchar(255)
);

alter table public.damages
    owner to postgres;

create table public.service_schedules
(
    is_deleted     boolean      not null,
    created_at     timestamp(6) not null,
    schedule_id    bigint generated by default as identity
        primary key,
    scheduled_date timestamp(6),
    updated_at     timestamp(6) not null,
    vehicle_id     bigint       not null
        constraint fkhsqb70ihyipsmx7ntdojxyusp
            references public.vehicles,
    service_type   varchar(50),
    status         varchar(255) not null
        constraint service_schedules_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PENDING'::character varying, 'CONFIRMED'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying, 'CLOSED'::character varying])::text[]))
);

alter table public.service_schedules
    owner to postgres;

create table public.technical_inspections
(
    is_deleted           boolean      not null,
    created_at           timestamp(6) not null,
    inspection_date      timestamp(6),
    inspection_id        bigint generated by default as identity
        primary key,
    next_inspection_date timestamp(6),
    updated_at           timestamp(6) not null,
    vehicle_id           bigint       not null
        constraint fkn4po7guh4f3shc8f2xj6igmrr
            references public.vehicles,
    inspector_name       varchar(100),
    comments             varchar(255),
    result               varchar(255) not null
        constraint technical_inspections_result_check
            check ((result)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PASSED'::character varying, 'FAILED'::character varying])::text[]))
);

alter table public.technical_inspections
    owner to postgres;

create table public.transport_orders
(
    is_deleted          boolean      not null,
    assigned_driver_id  bigint
        constraint fkpcccuk8x8wi2bwsd3joldijoe
            references public.drivers,
    assigned_vehicle_id bigint
        constraint fkfsbal5h89r9rruw6axk29d1qc
            references public.vehicles,
    client_order_id     bigint       not null
        constraint fk1pcj9a3xnqgw51pkfinhyijth
            references public.client_orders,
    created_at          timestamp(6) not null,
    end_location_id     bigint
        constraint fk5f17x3qtp4o1lpt6abw13yx7j
            references public.locations,
    scheduled_arrival   timestamp(6),
    scheduled_departure timestamp(6),
    start_location_id   bigint
        constraint fk2n5hb0xo0o404nne0ofa48b2a
            references public.locations,
    transport_order_id  bigint generated by default as identity
        primary key,
    updated_at          timestamp(6) not null,
    status              varchar(255) not null
        constraint transport_orders_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PENDING'::character varying, 'CONFIRMED'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying, 'CLOSED'::character varying])::text[]))
);

alter table public.transport_orders
    owner to postgres;

create table public.orders
(
    is_deleted         boolean      not null,
    client_order_id    bigint
        constraint fkbi65cvfkpdwgvhgl2etg9vje
            references public.client_orders,
    created_at         timestamp(6) not null,
    order_id           bigint generated by default as identity
        primary key,
    transport_order_id bigint
        constraint fkrqvg8dm30y0opoqde0mqvdfw5
            references public.transport_orders,
    updated_at         timestamp(6) not null,
    order_type         varchar(255) not null
        constraint orders_order_type_check
            check ((order_type)::text = ANY
                   ((ARRAY ['CLIENT'::character varying, 'SUBCONTRACTOR'::character varying, 'SUPPLIER'::character varying, 'OTHER'::character varying])::text[])),
    status             varchar(255) not null
        constraint orders_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PENDING'::character varying, 'CONFIRMED'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying, 'CLOSED'::character varying])::text[]))
);

alter table public.orders
    owner to postgres;

create table public.transports
(
    is_deleted         boolean      not null,
    actual_arrival     timestamp(6),
    actual_departure   timestamp(6),
    created_at         timestamp(6) not null,
    transport_id       bigint generated by default as identity
        primary key,
    transport_order_id bigint       not null
        unique
        constraint fk9v2lowcrba0vbqybbmb6cw0p8
            references public.transport_orders,
    updated_at         timestamp(6) not null,
    notes              varchar(255),
    status             varchar(255) not null
        constraint transports_status_check
            check ((status)::text = ANY
                   ((ARRAY ['NEW'::character varying, 'PENDING'::character varying, 'CONFIRMED'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying, 'CLOSED'::character varying])::text[]))
);

alter table public.transports
    owner to postgres;

create table public.shipping_documents
(
    is_deleted      boolean      not null,
    created_at      timestamp(6) not null,
    document_id     bigint generated by default as identity
        primary key,
    issue_date      timestamp(6) not null,
    transport_id    bigint       not null
        constraint fkjww5w6m4gfi0jsrmchufghxdu
            references public.transports,
    updated_at      timestamp(6) not null,
    document_number varchar(50),
    document_type   varchar(50),
    content         oid
);

alter table public.shipping_documents
    owner to postgres;

create table public.vehicle_repairs
(
    cost             double precision,
    is_deleted       boolean      not null,
    created_at       timestamp(6) not null,
    next_service_due timestamp(6),
    service_date     timestamp(6),
    service_id       bigint generated by default as identity
        primary key,
    updated_at       timestamp(6) not null,
    vehicle_id       bigint       not null
        constraint fkjoh9un41ythmens2mngp4lds9
            references public.vehicles,
    service_type     varchar(50),
    service_center   varchar(100),
    description      varchar(255)
);

alter table public.vehicle_repairs
    owner to postgres;


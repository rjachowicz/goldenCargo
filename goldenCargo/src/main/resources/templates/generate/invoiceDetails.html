<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Invoice Details</title>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body>
<div th:replace="~{/helpers/navbar}"></div>
<main class="container my-4">
    <div class="d-flex justify-content-between align-items-center bg-light text-dark rounded px-4 py-3 mb-4 shadow-sm border">
        <div>
            <h1 class="h3 mb-0"><i class="fas fa-file-invoice"></i> Invoice Details</h1>
            <p class="mb-0 text-muted">Below are the details of the generated invoice.</p>
        </div>
        <div class="d-flex gap-2">
            <a class="btn btn-secondary d-flex align-items-center gap-2"
               th:if="${invoice.invoicePaymentStatus} != 'PAID'"
               th:href="@{/invoices/pay(invoiceId=${invoice.invoiceId}, transportId=${invoice.transportId})}">
                <i class="fa-solid fa-dollar-sign"></i>
                <span>Pay</span>
            </a>
            <a class="btn btn-primary d-flex align-items-center gap-2"
               th:href="@{/export-invoice(clientOrderId=${invoice.clientOrderId}, clientId=${invoice.clientId})}">
                <i class="fas fa-file-pdf"></i>
                <span>Download PDF</span>
            </a>
            <a class="btn btn-primary d-flex align-items-center gap-2"
               th:href="@{/transport-orders/new-transport-order}">
                <i class="fas fa-file-pdf"></i>
                <span>Back To Orders</span>
            </a>
        </div>
    </div>
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header bg-light text-dark">
            <h3 class="card-title mb-0"><i class="fas fa-info-circle me-2"></i>Invoice Information</h3>
        </div>
        <div class="card-body">
            <table class="table table-sm table-borderless">
                <tbody>
                <tr>
                    <th>Invoice Number</th>
                    <td th:text="${invoice.invoiceNumber}"></td>
                </tr>
                <tr>
                    <th>Date Issued</th>
                    <td th:text="${invoice.dateIssued}"></td>
                </tr>
                <tr>
                    <th>Due Date</th>
                    <td th:text="${invoice.dueDate}"></td>
                </tr>
                <tr>
                    <th>Total Amount</th>
                    <td th:text="${invoice.invoiceTotalAmount}"></td>
                </tr>
                <tr>
                    <th>Payment Status</th>
                    <td th:text="${invoice.invoicePaymentStatus}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header bg-light text-dark">
            <h3 class="card-title mb-0"><i class="fas fa-user me-2"></i>Client Information</h3>
        </div>
        <div class="card-body">
            <table class="table table-sm table-borderless">
                <tbody>
                <tr>
                    <th>Client Name</th>
                    <td th:text="${invoice.clientName}"></td>
                </tr>
                <tr>
                    <th>NIP</th>
                    <td th:text="${invoice.clientNip}"></td>
                </tr>
                <tr>
                    <th>Phone</th>
                    <td th:text="${invoice.clientPhone}"></td>
                </tr>
                <tr>
                    <th>Email</th>
                    <td th:text="${invoice.clientEmail}"></td>
                </tr>
                <tr>
                    <th>Contact Person</th>
                    <td th:text="${invoice.contactPerson}"></td>
                </tr>
                <tr>
                    <th>Address</th>
                    <td th:text="${invoice.clientAddress}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card mb-4 shadow-sm border-0">
        <div class="card-header bg-light text-dark">
            <h3 class="card-title mb-0"><i class="fas fa-truck me-2"></i>Transport Information</h3>
        </div>
        <div class="card-body">
            <table class="table table-sm table-borderless">
                <tbody>
                <tr>
                    <th>Transport Order</th>
                    <td th:text="${invoice.transportOrderName}"></td>
                </tr>
                <tr>
                    <th>Scheduled Departure</th>
                    <td th:text="${invoice.scheduledDeparture}"></td>
                </tr>
                <tr>
                    <th>Scheduled Arrival</th>
                    <td th:text="${invoice.scheduledArrival}"></td>
                </tr>
                <tr>
                    <th>Actual Departure</th>
                    <td th:text="${invoice.actualDeparture}"></td>
                </tr>
                <tr>
                    <th>Actual Arrival</th>
                    <td th:text="${invoice.actualArrival}"></td>
                </tr>
                <tr>
                    <th>Notes</th>
                    <td th:text="${invoice.transportNotes}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<div th:replace="~{/helpers/footer}"></div>
</body>
</html>

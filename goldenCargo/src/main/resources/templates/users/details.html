<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body>
<div th:replace="~{/helpers/navbar :: navbar}"></div>
<div class="container mt-4">
    <h2>User Details</h2>

    <!-- Basic Information -->
    <p><strong>ID:</strong> <span th:text="${user.userId}"></span></p>
    <p><strong>Username:</strong> <span th:text="${user.username}"></span></p>
    <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
    <p><strong>First Name:</strong> <span th:text="${user.firstName} ?: 'N/A'"></span></p>
    <p><strong>Last Name:</strong> <span th:text="${user.lastName} ?: 'N/A'"></span></p>
    <p><strong>Phone Number:</strong> <span th:text="${user.phoneNumber} ?: 'N/A'"></span></p>
    <p><strong>Address:</strong> <span th:text="${user.address} ?: 'N/A'"></span></p>
    <p><strong>Status:</strong> <span th:text="${user.status}"></span></p>

    <div>
        <h5>User Roles</h5>
        <ul>
            <li th:each="role : ${user.userRoles}" th:text="${role.role.name}"></li>
        </ul>
    </div>

    <div th:if="${user.driver != null}">
        <h5>Driver Information</h5>
        <p><strong>Driver ID:</strong> <span th:text="${user.driver.driverId}"></span></p>
        <p><strong>License Number:</strong> <span th:text="${user.driver.licenseNumber}"></span></p>
    </div>

    <div th:if="${user.logistics != null}">
        <h5>Logistics Information</h5>
        <p><strong>Logistics ID:</strong> <span th:text="${user.logistics.logisticsId}"></span></p>
        <p><strong>Logistics Role:</strong> <span th:text="${user.logistics.user.status}"></span></p>
    </div>

    <div>
        <h5>Notifications</h5>
        <ul>
            <li th:each="notification : ${user.notifications}"
                th:text="${notification.message}"></li>
        </ul>
    </div>

    <div>
        <h5>Sent Messages</h5>
        <ul>
            <li th:each="message : ${user.sentMessages}"
                th:text="${message.content}"></li>
        </ul>
    </div>

    <div>
        <h5>Received Messages</h5>
        <ul>
            <li th:each="message : ${user.receivedMessages}"
                th:text="${message.content}"></li>
        </ul>
    </div>

    <div>
        <h5>News Posts</h5>
        <ul>
            <li th:each="news : ${user.newsPosts}"
                th:text="${news.title}"></li>
        </ul>
    </div>

    <a class="btn btn-secondary" href="/users">Back</a>
</div>
</body>
</html>
